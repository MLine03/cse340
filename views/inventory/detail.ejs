<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <style>
    .form-group { margin-bottom: 1rem; }
    label { display: block; font-weight: bold; margin-bottom: 0.2rem; }
    input, textarea { width: 100%; padding: 0.5rem; font-size: 1rem; }
    .review-box { border: 1px solid #ccc; padding: 0.5rem; margin-bottom: 1rem; border-radius: 4px; }
  </style>
</head>
<body>
<h1><%= vehicle.inv_make %> <%= vehicle.inv_model %></h1>

<% if (notice) { %>
  <p style="color: red;"><%= notice %></p>
<% } %>

<h2>Reviews</h2>
<% if (reviews.length > 0) { %>
  <% reviews.forEach(review => { %>
    <article class="review-box">
      <header><strong><%= review.account_firstname %> <%= review.account_lastname %></strong> 
      <time><%= new Date(review.review_date).toLocaleString() %></time></header>
      <p>Rating: ⭐ <%= review.review_rating %>/5</p>
      <p><%= review.review_text %></p>
    </article>
  <% }) %>
<% } else { %>
  <p>No reviews yet.</p>
<% } %>

<% if (loggedin) { %>
  <h3>Add Review</h3>
  <form action="/reviews/add" method="POST" aria-label="Add a review for this vehicle">
    <input type="hidden" name="inv_id" value="<%= vehicle.inv_id %>">

    <div class="form-group">
      <label for="review_rating">Rating (1–5)</label>
      <input type="number" id="review_rating" name="review_rating" min="1" max="5" required aria-required="true">
    </div>

    <div class="form-group">
      <label for="review_text">Review</label>
      <textarea id="review_text" name="review_text" minlength="10" required aria-required="true" rows="4" cols="50" placeholder="Write your review here..."></textarea>
    </div>

    <button type="submit">Submit Review</button>
  </form>
<% } else { %>
  <p>You must be logged in to leave a review.</p>
<% } %>
</body>
</html>
